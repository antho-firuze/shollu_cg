!function(t,e,a,i){"use strict";var n="shollu_cg",o="1.0.1",r={source:function(t,e){},onSelect:function(t){},onChange:function(t){},style:"bs3",menu_type:"normal",emptyMessage:"<center><b>No results were found</b></center>",page:1,rows:50,idField:"id",textField:"name",queryParams:{},item_cls:"",addition:{},list:{},remote:!1},l=function(e,a){function r(){return"bs3"==T.style?t('<div class="shollu_cg-container"><div class="input-group"><input type="hidden"><div class="input-group-btn"><span class="btn btn-default shollu_cg dropdown-toggle" data-dropdown="dropdown"><span class="caret" /></span></div></div></div>'):void 0}function l(){return t('<ul class="typeahead-long shollu_cg dropdown-menu dropdown-menu-right" />')}function s(){if(!O.data("init-shollu_cg")){O.data("init-shollu_cg",!0),O.before(j),P.before(O),P.attr("name",O.attr("name")),O.removeAttr("name"),T.disable=O.attr("disabled")===i?!1:O.attr("disabled")?!0:!1,d(T.disable),T.remote||Object.keys(T.list).length>0&&(t.each(T.list,function(t){var e=T.list[t][T.idField];T.list[t][T.textField];H[e]=T.list[t]}),T.rowData=H);var e=O.val();y(e)}return this}function c(){O.data("init-shollu_cg")&&(O.data("init-shollu_cg",!1),O.insertBefore(j),O.attr("name",P.attr("name")),O.val(P.val()),j.remove(),C(!1))}function d(t){O.prop("disabled",t),S.attr("disabled",t),T.disable=t,C(t?!1:!0)}function u(){var e=t.extend({},O.position(),{height:O[0].offsetHeight});q.insertAfter(O).css({top:e.top+e.height,left:e.left}).show(),T.shown=!0}function f(){q.hide(),t(".dropdown-menu").off("mousedown",function(t){"UL"==t.target.tagName}),T.shown=!1}function g(){N=!1,T.escape||(p(),T.selected||p(),!A&&T.shown&&setTimeout(function(){f(),T.page=1},200))}function h(){T.shown&&f(),T.disable||(T.shown?(f(),O.focus()):v())}function v(){var e=O.attr("data-"+T.idField),a=O.attr("data-"+T.textField),i=O.val();if(i!=a&&(O.attr("value","").attr("data-"+T.idField,"").attr("data-"+T.textField,""),P.val("").trigger("change"),T.onChange.call(this,{}),e=""),T.remote){var n={page:T.page,rows:T.rows};e&&(n[T.idField]=e),i&&(n.q=i),t.each(T.queryParams,function(t,e){n[t]=e}),setTimeout(function(){t.getJSON(T.url,n,function(t){var e=t.data;Object.keys(e).length>0&&m(e)})},100)}else m(T.list)}function p(){var t=(O.attr("data-"+T.idField),O.attr("data-"+T.textField)),e=O.val();e!=t&&(O.attr("value","").attr("data-"+T.idField,"").attr("data-"+T.textField,"").val("").trigger("change"),P.val("").trigger("change"),T.onSelect.call(this,{}));var a=O.attr("value"),n=q.find(".active").data(T.idField),o=q.find(".active").data(T.textField);return n===i?f():(n!==a&&(O.attr("value",n).attr("data-"+T.idField,n).attr("data-"+T.textField,o).val(o).trigger("change"),P.val(n).trigger("change"),T.onSelect.call(this,T.rowData[n])),T.selected=!0,f())}function m(e){var a=[],i=e,n=O.attr("data-"+T.idField);if(1==T.page&&q.empty(),Object.keys(T.addition).length>0){var o=T.addition[T.idField],r=T.addition[T.textField],l=T.item_cls?'class="'+T.item_cls+'" ':"";a.push(t("<li "+l+"data-"+T.idField+'="'+o+'" data-'+T.textField+'="'+r+'"><a>'+r+"</a></li>")),H[o]=T.addition}T.remote&&(i=e.rows,Q=Math.ceil(e.total/T.rows)),Object.keys(i).length>0?(t.each(i,function(e){var o=i[e][T.idField],r=i[e][T.textField],l=T.item_cls?'class="'+T.item_cls+'" ':"";if(n&&n==o){var s="active ";l=l?l+s:'class="'+s+'"'}a.push(t("<li "+l+"data-"+T.idField+'="'+o+'" data-'+T.textField+'="'+r+'"><a>'+r+"</a></li>")),H[o]=i[e]}),q.append(a)):q.append('<span style="color:#999;">'+T.emptyMessage+"</span>"),T.rowData=H,u(),O.focus()}function w(){var t=q.find(".active");if(t.length){var e=t.position().top,a=e+t.height(),i=q.scrollTop(),n=q.height();a>n?q.scrollTop(i+a-n):0>e&&q.scrollTop(i+e)}}function F(t){var e;return t=t===i?T.idField:t,(e=O.attr("value")===i?"":""==O.attr("value")?"":O.attr("value"))&&O.attr("value")?(e=T.rowData[O.attr("value")][t])===i?!1:e:void 0}function y(e){if(O.data("init-shollu_cg")!==!1){if(!e||0>e)return O.attr("value","").attr("data-"+T.idField,"").attr("data-"+T.textField,"").val("").trigger("change"),P.val("").trigger("change"),void T.onChange.call(this,{});if(T.remote)setTimeout(function(){t.getJSON(T.url,{id:e},function(t){var e=t.data.rows[0];if("undefined"!=typeof e){var a=e[T.idField],i=e[T.textField];O.attr("value",a).attr("data-"+T.idField,a).attr("data-"+T.textField,i).val(i).trigger("change"),P.val(a).trigger("change"),T.selected=!0,H[a]=e,T.rowData=H,T.onChange.call(this,T.rowData[a])}})},100);else if(Object.keys(T.list).length>0&&T.rowData[e]!==i){var a=T.rowData[e][T.idField],n=T.rowData[e][T.textField];O.attr("value",a).attr("data-"+T.idField,a).attr("data-"+T.textField,n).val(n).trigger("change"),P.val(a).trigger("change"),T.selected=!0,T.onChange.call(this,T.rowData[a])}}}function b(e){O.focus(),e.stopPropagation(),e.preventDefault();var a=(e.currentTarget.scrollTop+t(e.currentTarget).height())/e.currentTarget.scrollHeight*100;if(a>90&&!J&&T.page<Q&&(J=!0,T.page++,T.remote)){var i=O.val(),n={q:i,page:T.page,rows:T.rows};t.each(T.queryParams,function(t,e){n[t]=e}),setTimeout(function(){t.getJSON(T.url,n,function(t){var e=t.data;Object.keys(e).length>0&&m(e),J=!1})},100)}}function k(){var e=q.find(".active").removeClass("active"),a=e.next();a.length||(a=t(q.find("li")[0])),a.addClass("active")}function x(){var t=q.find(".active").removeClass("active"),e=t.prev();e.length||(e=q.find("li").last()),e.addClass("active")}function _(t){if(T.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),x(),w();break;case 40:t.preventDefault(),k(),w()}t.stopPropagation()}}function D(t){switch(t.keyCode){case 40:T.shown||h();break;case 39:case 38:case 37:case 36:case 35:case 16:case 17:case 18:break;case 9:case 13:if(!T.shown)return;p();break;case 27:if(!T.shown)return;T.escape=!0,f();break;default:v()}t.stopPropagation(),t.preventDefault()}function C(e){e?(O.on("focus",function(){N=!0}).on("blur",g).on("keypress",function(t){M||_(t)}).on("keydown",function(e){M=~t.inArray(e.keyCode,[40,38,9,13,27]),_(e)}).on("keyup",D).on("dblclick",h),q.on("click",function(t){O.focus(),t.stopPropagation(),t.preventDefault(),p()}).on("mouseenter","li",function(e){A=!0,q.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")}).on("mouseleave",function(){A=!1}).scroll(b),S.on("click",h)):(O.off("blur focusout focus keydown keyup keypress dblclick"),q.off("click mouseenter mouseleave scroll"),S.off("click"))}var T=a,O=t(e),j=r(),P=j.find("input[type=hidden]"),S=j.find("span.shollu_cg.dropdown-toggle"),q=l(),N=!1,A=!1,M={},J=!1,H={},Q=1;this.name=n,this.version=o,this.o=T,this.destroy=function(){c()},this.getValue=function(t){return F(t)},this.setValue=function(t){y(t)},this.disable=function(t){d(t)},this.init=function(){s()},s()};t.fn.shollu_cg=function(e){var a=t(this),i=a.data("shollu_cg");if("string"==typeof e){if(!i)return this;if(i[e])return t.isFunction(i[e])?i[e].apply(i,Array.prototype.slice.call(arguments,1)):i[e];t.error("Method "+e+" does not exist on jQuery.shollu_cg")}return this.each(function(){i?(i.o=t.extend(i.o,e),a.data("shollu_cg",i)):a.data("shollu_cg",new l(this,t.extend({},r,e)))})}}(jQuery);